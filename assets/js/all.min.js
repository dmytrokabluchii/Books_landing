window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("header"),t=document.querySelectorAll(".logo__link, .nav-menu__link, .link-footer"),o=document.querySelector(".hamburger__menu"),n=document.querySelector(".mobile"),i=document.querySelectorAll(".sidemenu ul li a, .logo__link"),l=document.querySelector(".modal__callback"),r=document.querySelector(".callback__field"),s=document.querySelector(".overlay"),a=document.querySelectorAll("[data-modal]");var c,d,u,m;function v(e,t){e.classList.toggle("active"),t.classList.remove("active"),document.body.style.overflow=""}window.addEventListener("load",(()=>{document.body.classList.add("loaded_hiding"),window.setTimeout((()=>{document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),500)})),c=e,window.onscroll=function(){window.pageYOffset>0?c.classList.add("fixed_header"):c.classList.remove("fixed_header")},function(){for(let e of t)e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}))}(),u=n,m=i,(d=o).addEventListener("click",(function(){d.classList.toggle("active"),u.classList.toggle("active"),document.body.classList.toggle("open"),document.body.classList.toggle("overflow")})),m.forEach((e=>{e.addEventListener("click",(()=>{d.classList.remove("active"),u.classList.remove("active"),document.body.classList.remove("open"),document.body.classList.remove("overflow")}))})),a.forEach((e=>{e.addEventListener("click",(()=>{!function(e,t){e.classList.toggle("active"),t.classList.add("active"),document.body.style.overflow="hidden"}(l,s)}))})),r.addEventListener("click",(e=>{e.target!==r&&""!=e.target.getAttribute("data-close")||v(l,s)})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&l.classList.contains("active")&&v(l,s)}));const f=document.querySelector(".callback__telephone"),g=document.querySelector(".callback__names"),b=document.querySelector(".callback__telephone"),h=document.querySelector("#my_callback-form"),_=document.querySelector("#my_subscribe-form"),p=document.querySelector("#email_subscribe"),y=document.querySelector("[data-modal_subscribe]");var w,L,k;(w=g).addEventListener("input",(()=>{""!==w.value?w.style.borderColor="green":w.style.borderColor="red"})),[].forEach.call(document.querySelectorAll("#callback_phone"),(function(e){let t;function o(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();let o="+38(___)___-__-__",n=0,i=o.replace(/\D/g,""),l=this.value.replace(/\D/g,""),r=o.replace(/[_\d]/g,(function(e){return n<l.length?l.charAt(n++)||i.charAt(n):e}));n=r.indexOf("_"),-1!=n&&(n<5&&(n=3),r=r.slice(0,n));let s=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",o,!1),e.addEventListener("focus",o,!1),e.addEventListener("blur",o,!1),e.addEventListener("keydown",o,!1)})),function(e){const t=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;e.addEventListener("input",(function(){var o;o=e.value,t.test(o)?e.style.borderColor="green":e.style.borderColor="red"}))}(p),L=p,k=_,y.addEventListener("click",(e=>{e.preventDefault(),""!==L.value?Email.send({Host:"smtp.elasticemail.com",Username:"dim8484@ukr.net",Password:"7BD93CC22771A12713C1D25E67A55F475060",To:"dim8484@ukr.net",From:L.value,Subject:"Subscriber's email from The Authorâ€™s Book website",Body:`Email subscriber: ${L.value}`}).then((e=>{return t=e,void Swal.fire({position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:6e3});var t})).finally((()=>{k.reset()})):S()})),f.addEventListener("input",(()=>{var e;(e=f).value.length<17?e.style.borderColor="red":e.style.borderColor="green"})),function(e){e.addEventListener("submit",(t=>{t.preventDefault();let o=encodeURI(`Books Website\nRecall\n\nName: ${g.value};\nPhone: ${b.value};`);""!==g.value&&""!==b.value&&b.value.length>16?axios.get("https://api.telegram.org/bot5324396066:AAFDhE5HZ4_mI54HC4OmzWCfjxawduNh8S8/sendMessage?chat_id=-1001758890997&text="+o+"&parse_mode=html").then((()=>{Swal.fire({position:"top-end",icon:"success",title:"Your message send, wait for call from our operator",showConfirmButton:!1,timer:5e3}),v(l,s)})).catch((()=>{Swal.fire({position:"top-end",icon:"error",title:"Error server, the message don`t send",showConfirmButton:!1,timer:4e3}),v(l,s)})).finally((()=>{e.reset(),v(l,s)})):(S(),l.classList.add("active"))}))}(h),document.querySelectorAll(".gallery-js").forEach((e=>{lightGallery(e,{selector:".gallery-link",thumbnail:!0,mode:"lg-fade"})}));const E=new Swiper(".swiper",{rewind:!0,grabCursor:!0,spaceBetween:30,slidesPerView:3,slidesPerGroup:3,breakpoints:{280:{slidesPerView:1,slidesPerGroup:1},599:{slidesPerView:2,spaceBetween:20,slidesPerGroup:2},999:{slidesPerView:3}},navigation:{prevEl:".swiper-navigation__prev",nextEl:".swiper-navigation__next"}});function S(){Swal.fire({position:"top-end",icon:"info",title:"Fill all fields",showConfirmButton:!1,timer:3e3})}axios.get("assets/common/cards.json").then((e=>{!function(e){e.data.forEach((({image:e,title:t,subtitle:o,btn:n,date:i})=>{E.appendSlide(`\n        <li class="cards-item swiper-slide">\n          <a class="cards-link" href="#!">\n              <div class="cards-link__image">\n                  <img class="cards-pic" src="assets/images/cards/${e}" alt="cards-image">\n              </div>\n              <div class="cards-link__info">\n                <div class="info-title item-title">${t}</div>\n                <div class="info-subtitle item-subtitle">${o}</div>\n                <div class="info-footer">\n                    <button class="info-footer__btn btn-read" data-modal_readmore>${n}</button>\n                    <div class="info-footer__date">${i}</div>\n                </div>\n              </div>\n          </a>\n        </li>\n      `)}))}(e)})).catch((()=>{Swal.fire({position:"top-end",icon:"error",title:'Error server, the information of block "Articles & Resources" can`t downloading',showConfirmButton:!1,timer:5e3})}))}));